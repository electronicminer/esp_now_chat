å—¯ï¼Œç”¨æˆ·ç°åœ¨éœ€è¦å†™ä¸€ä¸ªå…³äºä»–ä»¬æä¾›çš„ESP32ä»£ç çš„GitHubä»“åº“ä»‹ç»çš„Markdownæ–‡æ¡£ã€‚ä»–ä»¬å·²ç»ç»™å‡ºäº†ä»£ç ï¼Œå¹¶ä¸”ä¹‹å‰å·²ç»ç”Ÿæˆäº†ä¸€ä¸ªç±»ä¼¼çš„ä¸­æ–‡ä»‹ç»ï¼Œç°åœ¨ä»–ä»¬æƒ³æŠŠè¿™ä¸ªè½¬æ¢æˆMarkdownæ ¼å¼ã€‚æˆ‘éœ€è¦åˆ†æç”¨æˆ·çš„éœ€æ±‚ï¼Œç¡®å®šå“ªäº›éƒ¨åˆ†éœ€è¦è¢«åŒ…å«åœ¨Markdownä¸­ï¼Œä»¥åŠå¦‚ä½•ç»“æ„åŒ–è¿™ä¸ªæ–‡æ¡£ã€‚

é¦–å…ˆï¼Œç”¨æˆ·æä¾›çš„ä»£ç æ˜¯ä¸€ä¸ªESP32çš„åŒå‘é€šä¿¡é¡¹ç›®ï¼Œç»“åˆäº†ESP-NOWåè®®å’ŒWebSocketæŠ€æœ¯ã€‚ä»£ç ä¸­å®ç°äº†æ¶ˆæ¯ç¡®è®¤ã€è¶…æ—¶é‡ä¼ ï¼Œè¿˜æœ‰ç½‘é¡µç•Œé¢ã€‚ç”¨æˆ·ä¹‹å‰å·²ç»å†™äº†ä¸€ä¸ªæ¯”è¾ƒè¯¦ç»†çš„ä¸­æ–‡ä»‹ç»ï¼Œç°åœ¨éœ€è¦å°†å…¶è½¬æ¢ä¸ºMarkdownæ ¼å¼ï¼Œå¯èƒ½éœ€è¦æ›´æ¸…æ™°çš„ç»“æ„å’Œé€‚å½“çš„æ ¼å¼ã€‚

ç”¨æˆ·å¯èƒ½å¸Œæœ›è¿™ä¸ªMarkdownæ–‡æ¡£åŒ…å«é¡¹ç›®æ¦‚è¿°ã€åŠŸèƒ½ç‰¹æ€§ã€æŠ€æœ¯æ¶æ„å›¾ã€ç¡¬ä»¶è¦æ±‚ã€å¿«é€Ÿå…¥é—¨æŒ‡å—ã€æ¶ˆæ¯å¤„ç†æµç¨‹ã€æ‰©å±•æ¥å£ã€æ³¨æ„äº‹é¡¹ã€è®¸å¯è¯ç­‰ä¿¡æ¯ã€‚åŒæ—¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ä»£ç å—ã€æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ã€Mermaidæµç¨‹å›¾ç­‰Markdownå…ƒç´ æ¥å¢å¼ºå¯è¯»æ€§ã€‚

æˆ‘éœ€è¦æ£€æŸ¥ç”¨æˆ·ä¹‹å‰æä¾›çš„ä¸­æ–‡ä»‹ç»ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰é—æ¼çš„éƒ¨åˆ†ï¼Œæˆ–è€…å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ã€‚ä¾‹å¦‚ï¼ŒæŠ€æœ¯æ¶æ„éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨äº†Mermaidå›¾è¡¨ï¼Œè¿™åœ¨Markdownä¸­æ˜¯æ”¯æŒçš„ï¼Œä½†å¯èƒ½éœ€è¦ç¡®è®¤è¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚å¦å¤–ï¼Œå¿«é€Ÿå¼€å§‹éƒ¨åˆ†éœ€è¦ç¡®ä¿æ­¥éª¤æ¸…æ™°ï¼Œä»£ç ç¤ºä¾‹æ­£ç¡®ã€‚

è¿˜è¦æ³¨æ„ç”¨æˆ·æåˆ°çš„â€œå†™markdownâ€å¯èƒ½æ„å‘³ç€ä»–ä»¬å¸Œæœ›å¾—åˆ°ä¸€ä¸ªå¯ä»¥ç›´æ¥å¤åˆ¶åˆ°GitHubçš„README.mdæ–‡ä»¶ï¼Œæ‰€ä»¥æ ¼å¼å¿…é¡»æ­£ç¡®ï¼Œæ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚å¯èƒ½éœ€è¦å°†ä¹‹å‰çš„ä»‹ç»é‡æ–°ç»„ç»‡ï¼Œä½¿ç”¨é€‚å½“çš„æ ‡é¢˜çº§åˆ«ï¼Œæ·»åŠ å¿…è¦çš„ä»£ç å—å’Œé“¾æ¥ã€‚

å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½åœ¨æ³¨æ„äº‹é¡¹éƒ¨åˆ†æåˆ°äº†MACåœ°å€é…ç½®ã€è·ç¦»é™åˆ¶ã€ä¼šè¯è¶…æ—¶ç­‰ï¼Œéœ€è¦ç¡®ä¿è¿™äº›å†…å®¹åœ¨Markdownä¸­ä»¥åˆ—è¡¨æˆ–å¼ºè°ƒçš„æ–¹å¼å‘ˆç°ã€‚è®¸å¯è¯éƒ¨åˆ†é€šå¸¸ä½¿ç”¨æ ‡å‡†çš„MIT Licenseå£°æ˜ï¼Œå¯èƒ½éœ€è¦è¡¥å……ç‰ˆæƒä¿¡æ¯ã€‚

æœ€åï¼Œæ£€æŸ¥æ•´ä¸ªæ–‡æ¡£çš„ç»“æ„æ˜¯å¦æµç•…ï¼Œé€»è¾‘æ˜¯å¦æ¸…æ™°ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤ŸæŒ‰ç…§æ­¥éª¤é¡ºåˆ©éƒ¨ç½²é¡¹ç›®ï¼Œå¹¶ç†è§£å„éƒ¨åˆ†çš„åŠŸèƒ½å’Œå®ç°æ–¹å¼ã€‚å¦‚æœæœ‰ä¸ç¡®å®šçš„åœ°æ–¹ï¼Œå¯èƒ½éœ€è¦å‚è€ƒå¸¸è§çš„ESP32é¡¹ç›®æ–‡æ¡£ç»“æ„ï¼Œç¡®ä¿ç¬¦åˆæœ€ä½³å®è·µã€‚




ä»¥ä¸‹æ˜¯æ•´ç†åçš„Markdownæ–‡æ¡£ï¼š

```markdown
# ğŸ“¡ ESP32 ESP-NOWåŒå‘é€šä¿¡ä¸Webå®æ—¶æ¶ˆæ¯ç³»ç»Ÿ

![Project Banner](https://img-blog.csdnimg.cn/direct/4c46b8d4a1a94f0d9c3d1a5a5d8e4e9a.png)  
*é€šè¿‡ESP-NOWåè®®å®ç°è®¾å¤‡é—´å¯é é€šä¿¡ï¼Œç»“åˆWebSocketæä¾›å®æ—¶ç½‘é¡µäº¤äº’*

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- **åŒé‡é€šä¿¡åè®®**  
  `ESP-NOW`ç›´è¿ä¼ è¾“ + `WebSocket`å®æ—¶æ¨é€
- **æ¶ˆæ¯å¯é æ€§**  
  âœ”ï¸ æ¶ˆæ¯IDæ ‡è®° âœ”ï¸ ACKç¡®è®¤æœºåˆ¶ âœ”ï¸ 2ç§’è¶…æ—¶é‡ä¼ 
- **å¯è§†åŒ–ç›‘æ§**  
  Webç•Œé¢å®æ—¶æ˜¾ç¤ºï¼š`å‘é€ä¸­` â†’ `âˆšæˆåŠŸ` / `Ã—å¤±è´¥`
- **å³æ’å³ç”¨**  
  ğŸ“¶ è‡ªåŠ¨åˆ›å»ºWiFiçƒ­ç‚¹ï¼Œæ‰‹æœº/ç”µè„‘ç›´æ¥è®¿é—®

## ğŸ“š ç›®å½•
- [ç¡¬ä»¶è¦æ±‚](#-ç¡¬ä»¶è¦æ±‚)
- [å¿«é€Ÿéƒ¨ç½²](#-å¿«é€Ÿéƒ¨ç½²)
- [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)  
- [ä»£ç ç»“æ„](#-ä»£ç ç»“æ„)
- [è¿›é˜¶é…ç½®](#-è¿›é˜¶é…ç½®)  
- [æ•…éšœæ’æŸ¥](#-æ•…éšœæ’æŸ¥)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## ğŸ› ï¸ ç¡¬ä»¶è¦æ±‚
| ç»„ä»¶               | è§„æ ¼                  |
|--------------------|-----------------------|
| ESP32å¼€å‘æ¿        | å»ºè®®ä½¿ç”¨ESP32-S3      |
| USBæ•°æ®çº¿          | Type-Cæ¥å£            | 
| ç”µæº               | 5V/2Aé€‚é…å™¨           |
| ç½‘ç»œç¯å¢ƒ           | 2.4GHz WiFié¢‘æ®µ       |

---

## âš¡ å¿«é€Ÿéƒ¨ç½²

### 1. ç¯å¢ƒé…ç½®
1. å®‰è£…Arduino IDEï¼ˆâ‰¥2.0ï¼‰
2. æ·»åŠ å¼€å‘æ¿æ”¯æŒï¼š
   ```bash
   https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
   ```
3. å®‰è£…åº“ï¼š
   - ESPAsyncWebServer
   - WebSockets
   - Adafruit MQTT Library

### 2. è®¾å¤‡é…å¯¹
```cpp
// ä¿®æ”¹ç›®æ ‡è®¾å¤‡MACåœ°å€ï¼ˆä¸¤ä¸ªè®¾å¤‡éœ€äº’ç›¸é…ç½®ï¼‰
uint8_t peerAddress[] = {0xCC,0xBA,0x97,0x0F,0x2C,0x74}; 

// è®¾ç½®APçƒ­ç‚¹ï¼ˆä¸¤å°è®¾å¤‡ä¸åŒåç§°ï¼‰
WiFi.softAP("ESP32-Chat_1", "12345678");  // è®¾å¤‡1
WiFi.softAP("ESP32-Chat_2", "12345678");  // è®¾å¤‡2
```

### 3. çƒ§å½•ç¨‹åº
```bash
# ä½¿ç”¨PlatformIOå¿«é€Ÿç¼–è¯‘
pio run --target upload --environment esp32dev
```

---

## ğŸŒ ç³»ç»Ÿæ¶æ„
```mermaid
sequenceDiagram
    participant Web as ç½‘é¡µå®¢æˆ·ç«¯
    participant Server as ESP32 WebæœåŠ¡å™¨
    participant Peer as å¯¹ç«¯ESP32
    
    Web->>Server: WSè¿æ¥(ws://192.168.4.1:81)
    loop æ¶ˆæ¯å¾ªç¯
        Web->>Server: å‘é€æ¶ˆæ¯
        Server->>Peer: ESP-NOWä¼ è¾“
        Peer-->>Server: ACKç¡®è®¤
        Server->>Web: æ›´æ–°çŠ¶æ€(âˆš/Ã—)
    end
```

---

## ğŸ“‚ ä»£ç ç»“æ„
```
src/
â”œâ”€â”€ main.cpp                # ä¸»ç¨‹åºé€»è¾‘
â”œâ”€â”€ config.h                # è®¾å¤‡é…ç½®å‚æ•°
â”œâ”€â”€ websocket_handler.cpp   # WebSocketäº‹ä»¶å¤„ç†
â””â”€â”€ espnow_handler.cpp      # ESP-NOWé€šä¿¡æ ¸å¿ƒ
```

å…³é”®å‡½æ•°è¯´æ˜ï¼š
```cpp
void sendMessage(String msg) {
    // ç”Ÿæˆæ¶ˆæ¯ID â†’ å­˜å‚¨å¾…ç¡®è®¤åˆ—è¡¨ â†’ ESP-NOWå‘é€
}

void checkTimeouts() {
    // æ¯2ç§’æ£€æŸ¥æœªç¡®è®¤æ¶ˆæ¯ â†’ è‡ªåŠ¨é‡ä¼ ï¼ˆæœ€å¤š3æ¬¡ï¼‰
}
```

---

## ğŸ”§ è¿›é˜¶é…ç½®

### å¢åŠ ä¼ æ„Ÿå™¨æ•°æ®
```cpp
struct_message {
    ...
    float temperature;  // æ–°å¢æ¸©åº¦å­—æ®µ
    uint8_t humidity;   // æ–°å¢æ¹¿åº¦å­—æ®µ
};
```

### ä¿®æ”¹é‡ä¼ ç­–ç•¥
```cpp
// åœ¨checkTimeouts()ä¸­ä¿®æ”¹
if (currentTime - sendTime > 5000) {  // æ”¹ä¸º5ç§’è¶…æ—¶
    retryCount++;                     // æ·»åŠ é‡è¯•è®¡æ•°å™¨
    if(retryCount < 5) {...}         // é™åˆ¶æœ€å¤§é‡è¯•æ¬¡æ•°
}
```

---

## ğŸš¨ æ•…éšœæ’æŸ¥

| ç°è±¡                 | è§£å†³æ–¹æ¡ˆ                |
|----------------------|-------------------------|
| æ— æ³•å»ºç«‹WebSocketè¿æ¥ | æ£€æŸ¥é˜²ç«å¢™è®¾ç½®/ç«¯å£å ç”¨ |
| ACKç¡®è®¤è¶…æ—¶           | ç¡®è®¤MACåœ°å€é…ç½®æ­£ç¡®     |
| ç½‘é¡µæ˜¾ç¤ºæ–­è¿         | é‡æ–°è¿æ¥WiFiçƒ­ç‚¹       |
| æ•°æ®åŒ…ä¸¢å¤±           | ç¼©çŸ­è®¾å¤‡é—´è·ç¦»         |

---

## ğŸ“œ è®¸å¯è¯
**MIT License**  
å…è®¸å•†ä¸šç”¨é€”ï¼Œéœ€ä¿ç•™åŸå§‹ç‰ˆæƒå£°æ˜ã€‚å®Œæ•´è®¸å¯æ–‡æœ¬è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---
```

> é¡¹ç›®æ¼”ç¤ºè§†é¢‘ä¸è¯¦ç»†æ–‡æ¡£è¯·è®¿é—®ï¼šhttps://github.com/yourusername/esp32-espnow-websocket/wiki
